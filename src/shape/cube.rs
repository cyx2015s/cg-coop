use crate::shape::mesh::AsMesh;

pub struct Cube {
    pub width: f32,
    pub height: f32,
    pub depth: f32,
}

///```txt
///       â†‘ y
///       |
///      3|______ 2
///       /     /|
///    7 /____6/ |
///     |(0)  |  | 1 ____> x
///     |     | /
///     |_____|/
///    / 4     5
///   /
///  z
///```
pub const CUBE_VERTICES: [[f32; 3]; 8] = [
    [-1.0, -1.0, -1.0],
    [1.0, -1.0, -1.0],
    [1.0, 1.0, -1.0],
    [-1.0, 1.0, -1.0],
    [-1.0, -1.0, 1.0],
    [1.0, -1.0, 1.0],
    [1.0, 1.0, 1.0],
    [-1.0, 1.0, 1.0],
];

pub const CUBE_INDICES: [u16; 36] = [
    0, 1, 2, 2, 3, 0, // back face
    4, 5, 6, 6, 7, 4, // front face
    3, 2, 6, 6, 7, 3, // top face
    0, 1, 5, 5, 4, 0, // bottom face
    1, 2, 6, 6, 5, 1, // right face
    0, 3, 7, 7, 4, 0, // left face
];

pub const CUBE_NORMALS: [[f32; 3]; 36] = [
    [0.0, 0.0, -1.0],
    [0.0, 0.0, -1.0],
    [0.0, 0.0, -1.0],
    [0.0, 0.0, -1.0],
    [0.0, 0.0, -1.0],
    [0.0, 0.0, -1.0],
    [0.0, 0.0, 1.0],
    [0.0, 0.0, 1.0],
    [0.0, 0.0, 1.0],
    [0.0, 0.0, 1.0],
    [0.0, 0.0, 1.0],
    [0.0, 0.0, 1.0],
    [0.0, 1.0, 0.0],
    [0.0, 1.0, 0.0],
    [0.0, 1.0, 0.0],
    [0.0, 1.0, 0.0],
    [0.0, 1.0, 0.0],
    [0.0, 1.0, 0.0],
    [0.0, -1.0, 0.0],
    [0.0, -1.0, 0.0],
    [0.0, -1.0, 0.0],
    [0.0, -1.0, 0.0],
    [0.0, -1.0, 0.0],
    [0.0, -1.0, 0.0],
    [1.0, 0.0, 0.0],
    [1.0, 0.0, 0.0],
    [1.0, 0.0, 0.0],
    [1.0, 0.0, 0.0],
    [1.0, 0.0, 0.0],
    [1.0, 0.0, 0.0],
    [-1.0, 0.0, 0.0],
    [-1.0, 0.0, 0.0],
    [-1.0, 0.0, 0.0],
    [-1.0, 0.0, 0.0],
    [-1.0, 0.0, 0.0],
    [-1.0, 0.0, 0.0],
];

impl AsMesh for Cube {
    fn as_mesh(&self) -> crate::shape::mesh::Mesh {
        let vertices = CUBE_VERTICES
            .iter()
            .map(|v| {
                [
                    v[0] * self.width / 2.0,
                    v[1] * self.height / 2.0,
                    v[2] * self.depth / 2.0,
                ]
            })
            .collect();

        crate::shape::mesh::Mesh {
            vertices,
            indices: CUBE_INDICES.to_vec(),
            normals: CUBE_NORMALS.to_vec(),
        }
    }
}
